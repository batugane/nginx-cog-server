server {
    listen 80;
    server_name localhost;

    location / {
        root /usr/share/nginx/html;
        autoindex on;  # Optional: enables directory listing
        include /etc/nginx/mime.types;
        default_type application/octet-stream;

        # Enable CORS
        add_header 'Access-Control-Allow-Origin' '*';
        add_header 'Access-Control-Allow-Methods' 'GET, OPTIONS';
        add_header 'Access-Control-Allow-Headers' 'Range';

        # Support byte range requests
        proxy_set_header Range $http_range;
        proxy_set_header If-Range $http_if_range;
        proxy_pass_header Range;
        proxy_pass_header If-Range;

        # Additional headers for caching, etc. (optional)
        add_header Cache-Control "public, max-age=3600";
    }

    location /cog_files/ {
        alias /usr/share/nginx/html/cog_files/;
        autoindex on;  # Optional: enables directory listing
        include /etc/nginx/mime.types;
        default_type application/octet-stream;

        # Enable CORS
        add_header 'Access-Control-Allow-Origin' '*';
        add_header 'Access-Control-Allow-Methods' 'GET, OPTIONS';
        add_header 'Access-Control-Allow-Headers' 'Range';

        # Support byte range requests
        proxy_set_header Range $http_range;
        proxy_set_header If-Range $http_if_range;
        proxy_pass_header Range;
        proxy_pass_header If-Range;

        # Additional headers for caching, etc. (optional)
        add_header Cache-Control "public, max-age=3600";
    }
}
